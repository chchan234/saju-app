# ì‚¬ì£¼íŒ”ì ì›¹ì•± êµ¬í˜„ ë¬¸ì„œ

## í”„ë¡œì íŠ¸ ê°œìš”

Next.js 16 + Supabase ê¸°ë°˜ ì‚¬ì£¼íŒ”ì ë¶„ì„ ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜

### ê¸°ìˆ  ìŠ¤íƒ
- **Frontend**: Next.js 16 (App Router), TypeScript, Tailwind CSS
- **UI Components**: shadcn/ui (Card, Badge, Button, Input, Label, Tabs)
- **Backend**: Next.js API Routes
- **Database**: Supabase (PostgreSQL)
- **Data**: ë§Œì„¸ë ¥ ë°ì´í„° 73,442ê±´ (1900-2100ë…„)

---

## êµ¬í˜„ ì™„ë£Œ ê¸°ëŠ¥

### 1. ì‚¬ì£¼íŒ”ì ê³„ì‚° (`/api/saju`)

**íŒŒì¼**: `src/lib/saju-calculator.ts`

#### í•µì‹¬ ê¸°ëŠ¥
- ë…„ì£¼, ì›”ì£¼, ì¼ì£¼, ì‹œì£¼ ê³„ì‚°
- ì²œê°„/ì§€ì§€ ì˜¤í–‰ ë§¤í•‘
- ìŒì–‘ íŒë³„
- ì‹­ì‹  ê³„ì‚° (ì¼ê°„ ê¸°ì¤€)
- ì˜¤í–‰ ê°œìˆ˜ ë¶„ì„
- ë³´ì¶© ì˜¤í–‰(ìš©ì‹ ) ì¶”ì²œ

#### ì‹œì£¼ ê³„ì‚° ë¡œì§
```typescript
// ì¼ê°„ì— ë”°ë¥¸ ì‹œì£¼ ì²œê°„ ê²°ì •
ê°‘/ê¸°ì¼ â†’ ê°‘ìì‹œ ì‹œì‘
ì„/ê²½ì¼ â†’ ë³‘ìì‹œ ì‹œì‘
ë³‘/ì‹ ì¼ â†’ ë¬´ìì‹œ ì‹œì‘
ì •/ì„ì¼ â†’ ê²½ìì‹œ ì‹œì‘
ë¬´/ê³„ì¼ â†’ ì„ìì‹œ ì‹œì‘
```

#### ì‹­ì‹  ê³„ì‚°
- 10ì²œê°„ Ã— 10ì²œê°„ = 100ê°€ì§€ ì‹­ì‹  ë§¤í•‘
- ì§€ì§€ëŠ” ë³¸ê¸°(æœ¬æ°£) ê¸°ì¤€ìœ¼ë¡œ ì‹­ì‹  ê³„ì‚°
- **ëª¨ë“  ê¸°ë‘¥ì— ì‹­ì‹  ê³„ì‚°** (ë…„ì£¼, ì›”ì£¼, ì¼ì£¼, ì‹œì£¼)

```typescript
// ê° ê¸°ë‘¥ ìƒì„± ì‹œ ì¼ê°„(ilgan)ì„ ì „ë‹¬í•˜ì—¬ ì‹­ì‹  ê³„ì‚°
const yearPillar = createPillar(yearGanji, ilgan);
const monthPillar = createPillar(monthGanji, ilgan);
const dayPillar = createPillar(dayGanji, ilgan);  // ì¼ì£¼ë„ ì‹­ì‹  í•„ìš”
const timePillar = createPillar(timeGanji, ilgan);
```

> **ë²„ê·¸ ìˆ˜ì •**: ê¸°ì¡´ì— ì¼ì£¼ ìƒì„± ì‹œ `createPillar(dayGanji)` í˜•íƒœë¡œ í˜¸ì¶œí•˜ì—¬ ì‹­ì‹ ì´ ê³„ì‚°ë˜ì§€ ì•Šì•˜ë˜ ë¬¸ì œë¥¼ `createPillar(dayGanji, ilgan)`ìœ¼ë¡œ ìˆ˜ì •

### 2. ë  ê³„ì‚° (ì´ì¤‘ ê¸°ì¤€)

**ë°°ê²½**: ë  ê³„ì‚°ì—ëŠ” ë‘ ê°€ì§€ ê¸°ì¤€ì´ ìˆìŒ
- **ìŒë ¥ ì„¤ë‚  ê¸°ì¤€**: ì¼ë°˜ì ìœ¼ë¡œ ì‚¬ìš©í•˜ëŠ” ë 
- **ì…ì¶˜ ê¸°ì¤€**: ì‚¬ì£¼í•™ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë 

**êµ¬í˜„**:
```typescript
meta: {
  ddi: string;       // ì…ì¶˜ ê¸°ì¤€ ë  (ì‚¬ì£¼ìš©) - DBì—ì„œ ì¡°íšŒ
  ddiLunar: string;  // ìŒë ¥ ê¸°ì¤€ ë  (ì¼ë°˜ìš©) - ìŒë ¥ë…„ë„ % 12ë¡œ ê³„ì‚°
}
```

**UI í‘œì‹œ**: ë‘ ë ê°€ ë‹¤ë¥¼ ê²½ìš° ë‘˜ ë‹¤ í‘œì‹œ
```
ë : ì¥ë  (ìŒë ¥ ê¸°ì¤€)
ì‚¬ì£¼ ë : ì†Œë  (ì…ì¶˜ ê¸°ì¤€)
```

### 3. ì‹œê°„ ëª¨ë¦„ ì²˜ë¦¬

**ê¸°ëŠ¥**: íƒœì–´ë‚œ ì‹œê°„ì„ ëª¨ë¥´ëŠ” ê²½ìš° ì‹œì£¼ ì—†ì´ ì‚¼ì£¼(ä¸‰æŸ±)ë¡œ ë¶„ì„

#### êµ¬í˜„ íë¦„
```
SajuForm (hour="unknown")
  â†’ URL param: timeUnknown=true
  â†’ result/page.tsxì—ì„œ ì½ê¸°
  â†’ API í˜¸ì¶œ ì‹œ timeUnknown: true ì „ë‹¬
  â†’ saju-calculatorì—ì„œ ì‹œì£¼ ë¹ˆ ê°’ìœ¼ë¡œ ì²˜ë¦¬
  â†’ SajuResultì—ì„œ ì‹œì£¼ ìˆ¨ê¹€
```

#### ì£¼ìš” ë³€ê²½ì‚¬í•­

**1. SajuForm.tsx** - URL íŒŒë¼ë¯¸í„° ì¶”ê°€
```typescript
const navigateToResult = (person: PersonData) => {
  const isTimeUnknown = person.hour === "unknown";
  const params = new URLSearchParams({
    // ...ê¸°ì¡´ íŒŒë¼ë¯¸í„°
    ...(isTimeUnknown && { timeUnknown: "true" }),
  });
};
```

**2. result/page.tsx** - timeUnknown ìƒíƒœ ê´€ë¦¬
```typescript
const [timeUnknown, setTimeUnknown] = useState(false);
const isTimeUnknown = searchParams.get("timeUnknown") === "true";
setTimeUnknown(isTimeUnknown);
// API í˜¸ì¶œ ì‹œ í¬í•¨
body: JSON.stringify({ ...params, timeUnknown: isTimeUnknown })
// ì»´í¬ë„ŒíŠ¸ì— ì „ë‹¬
<SajuResult result={result} name={name} timeUnknown={timeUnknown} />
```

**3. saju-calculator.ts** - ì‹œì£¼ ë° ì˜¤í–‰ ê³„ì‚°
```typescript
export function calculateSaju(
  calendaData: CalendaData,
  birthHour: number,
  birthMinute: number,
  timeUnknown: boolean = false  // ìƒˆ íŒŒë¼ë¯¸í„°
): SajuApiResult {
  // ì‹œì£¼: ì‹œê°„ ëª¨ë¦„ì´ë©´ ë¹ˆ ê¸°ë‘¥
  const timePillar = timeUnknown
    ? createPillar("", ilgan)
    : createPillar(timeGanji, ilgan);

  // ì˜¤í–‰ ì¹´ìš´íŠ¸: ì‹œê°„ ëª¨ë¦„ì´ë©´ ì‹œì£¼ ì œì™¸ (6ê¸€ì)
  const pillarsForCount = timeUnknown
    ? [yearPillar, monthPillar, dayPillar]
    : [yearPillar, monthPillar, dayPillar, timePillar];
}
```

**4. SajuResult.tsx** - ì¡°ê±´ë¶€ ë Œë”ë§
```typescript
interface SajuResultProps {
  result: SajuApiResult & { analysis?: {...} };
  name?: string;
  timeUnknown?: boolean;  // ìƒˆ prop
}

// ì‹œê°„ í‘œì‹œ
<span>{timeUnknown ? "ëª¨ë¦„" : `${hour}:${minute.toString().padStart(2, "0")}`}</span>

// ì‹œì£¼ ì¹´ë“œ ì¡°ê±´ë¶€ ë Œë”ë§
{!timeUnknown && <PillarCard pillar={timePillar} label="ì‹œì£¼" />}
```

#### ì˜¤í–‰ ë¶„ì„ ì°¨ì´
| êµ¬ë¶„ | ì‹œê°„ ì•Œ ë•Œ | ì‹œê°„ ëª¨ë¥¼ ë•Œ |
|------|-----------|-------------|
| ë¶„ì„ ê¸°ë‘¥ | 4ì£¼ (íŒ”ì) | 3ì£¼ (ì‚¼ì£¼) |
| ì˜¤í–‰ ê¸€ì | 8ê¸€ì | 6ê¸€ì |
| ì‹œì£¼ í‘œì‹œ | O | X |

---

### 4. ì˜¤í–‰ ë¶„ì„

#### ì˜¤í–‰ ê°œìˆ˜ ê³„ì‚°
- ì‹œê°„ ì•Œ ë•Œ: 4ì£¼ Ã— 2(ì²œê°„+ì§€ì§€) = 8ê¸€ìì˜ ì˜¤í–‰ ì§‘ê³„
- ì‹œê°„ ëª¨ë¥¼ ë•Œ: 3ì£¼ Ã— 2(ì²œê°„+ì§€ì§€) = 6ê¸€ìì˜ ì˜¤í–‰ ì§‘ê³„
- ëª©, í™”, í† , ê¸ˆ, ìˆ˜ ê°ê°ì˜ ê°œìˆ˜

#### ë™ì  ì²˜ë¦¬
- ê°€ì¥ ë§ì€/ì ì€ ì˜¤í–‰ì´ ë™ì ì¼ ê²½ìš° ëª¨ë‘ í‘œì‹œ
```typescript
const maxOhengList = sortedOheng.filter(([_, count]) => count === maxCount);
const minOhengList = sortedOheng.filter(([_, count]) => count === minCount);
```

#### ë³´ì¶© ì˜¤í–‰(ìš©ì‹ ) ì¶”ì²œ ë¡œì§
```typescript
// ìš°ì„ ìˆœìœ„:
// 1. ì—†ëŠ” ì˜¤í–‰(0ê°œ)ì´ ìˆìœ¼ë©´ ê·¸ê²ƒì„ ì¶”ì²œ
// 2. ì—†ëŠ” ê²Œ ì—†ìœ¼ë©´ ê°€ì¥ ì ì€ ì˜¤í–‰ ì¶”ì²œ
```

### 5. ì„±í–¥ ë¶„ì„ í…œí”Œë¦¿

**íŒŒì¼**: `src/lib/saju-traits.ts`

#### ì¼ê°„ë³„ ì„±í–¥ (10ì²œê°„)
ê° ì¼ê°„ì— ëŒ€í•´ ë‹¤ìŒ ì •ë³´ ì œê³µ:
- í•œì/ì˜¤í–‰/ìŒì–‘
- ìƒì§• (ì˜ˆ: ê°‘ = í° ë‚˜ë¬´)
- ì„±í–¥ íƒ€ì… (ì˜ˆ: "ê°œì²™ìí˜• ë¦¬ë”")
- í•µì‹¬ í‚¤ì›Œë“œ 4ê°œ
- ê°•ì  5ê°œ
- ì•½ì  4ê°œ
- ìƒì„¸ ì„±í–¥: ì„±ê²©, ì˜ì‚¬ê²°ì •, ëŒ€ì¸ê´€ê³„, ì—…ë¬´, ì—°ì• , ìŠ¤íŠ¸ë ˆìŠ¤ íŒ¨í„´
- ë°œì „ ì¡°ì–¸

#### ì˜¤í–‰ë³„ ìƒí™œ ì¡°ì–¸ (5í–‰)
ê° ì˜¤í–‰ì— ëŒ€í•´ ë‹¤ìŒ ì •ë³´ ì œê³µ:
- ë³¸ì„± ì„¤ëª…
- ì¶”ì²œ ìƒ‰ìƒ, ë°©í–¥, ê³„ì ˆ
- í–‰ìš´ì˜ ìˆ«ì
- ì¶”ì²œ ì§ì—…/ë¶„ì•¼
- ì¢‹ì€ ìŠµê´€ / í”¼í•´ì•¼ í•  ê²ƒ
- ê±´ê°• ê´€ë¦¬ í¬ì¸íŠ¸
- ì¶”ì²œ ì•„ì´í…œ, ìŒì‹

### 7. ë¶„ì„ ê°•í™” ë°ì´í„° (`saju-analysis-data.ts`)

**íŒŒì¼**: `src/lib/saju-analysis-data.ts` (ì•½ 1100ì¤„)

#### 60ê°‘ì ì¼ì£¼ ìƒì§• (`ILJU_SYMBOLS`)
ê° ì¼ì£¼ì— ëŒ€í•´ ë‹¤ìŒ ì •ë³´ ì œê³µ:
- `name`: ì¼ì£¼ ì´ë¦„ (ì˜ˆ: "ê°‘ì")
- `hanja`: í•œì (ì˜ˆ: "ç”²å­")
- `nickname`: ë³„ëª… (ì˜ˆ: "ë°”ë‹¤ ìœ„ì˜ í° ë‚˜ë¬´")
- `symbol`: ìƒì§• ì´ë¯¸ì§€
- `essence`: ë³¸ì§ˆ ì„¤ëª…
- `personality`: ì„±ê²© íŠ¹ì„±
- `lifeTheme`: ì¸ìƒ ì£¼ì œ

```typescript
ILJU_SYMBOLS["ê°‘ì"] = {
  name: "ê°‘ì",
  hanja: "ç”²å­",
  nickname: "ë°”ë‹¤ ìœ„ì˜ í° ë‚˜ë¬´",
  symbol: "ğŸŒŠğŸŒ²",
  essence: "ë„“ì€ ë°”ë‹¤ ìœ„ì— ìš°ëš ì„  í° ë‚˜ë¬´ì²˜ëŸ¼...",
  personality: "ì§„ì·¨ì ì´ê³  ê°œì²™ ì •ì‹ ì´ ê°•í•¨",
  lifeTheme: "ìƒˆë¡œìš´ ì‹œì‘ê³¼ í˜ì‹ "
}
```

#### 12ìš´ì„± ì •ë³´ (`UNSEONG_INFO`)
| ìš´ì„± | ì˜ë¯¸ | íŠ¹ì„± |
|------|------|------|
| ì¥ìƒ | íƒ„ìƒ, ì‹œì‘ | ìƒˆë¡œìš´ ì‹œì‘ì˜ ì—ë„ˆì§€ |
| ëª©ìš• | ì„±ì¥, ì •í™” | ì„±ì¥í†µê³¼ ë³€í™”ì˜ ì‹œê¸° |
| ê´€ëŒ€ | í™œë™, ì„±ì¸ | ì‚¬íšŒ ì§„ì¶œì˜ ì‹œê¸° |
| ê±´ë¡ | ì „ì„±, ì•ˆì • | ìë¦½ê³¼ ì„±ì·¨ì˜ ì‹œê¸° |
| ì œì™• | ì ˆì •, ê¶Œìœ„ | ì˜í–¥ë ¥ê³¼ í†µì†”ì˜ ì‹œê¸° |
| ì‡  | ì „í™˜, ë³€í™” | ì„±ì°°ê³¼ ì¡°ì •ì˜ ì‹œê¸° |
| ë³‘ | ì‡ ì•½, íœ´ì‹ | íšŒë³µê³¼ ì¬ì¶©ì „ì˜ ì‹œê¸° |
| ì‚¬ | ì†Œë©¸, ë§ˆë¬´ë¦¬ | ì •ë¦¬ì™€ ì¢…ê²°ì˜ ì‹œê¸° |
| ë¬˜ | ì ë³µ, ì €ì¥ | ì¤€ë¹„ì™€ ì¶•ì ì˜ ì‹œê¸° |
| ì ˆ | ë‹¨ì ˆ, ê³µí—ˆ | ë¹„ì›€ê³¼ ìƒˆ ì¶œë°œ ì¤€ë¹„ |
| íƒœ | ì‰íƒœ, ì‹œì‘ | ìƒˆ ìƒëª…ì˜ ì‹¹í‹ˆ |
| ì–‘ | ì„±ì¥, ì¤€ë¹„ | í˜•ì²´ë¥¼ ê°–ì¶°ê°€ëŠ” ì‹œê¸° |

#### ì˜¤í–‰ ë³´ì™„ë²• ìƒì„¸ (`OHENG_BOOSTERS`)
ê° ì˜¤í–‰ì— ëŒ€í•´ ë‹¤ìŒ ì •ë³´ ì œê³µ:
- `color`: ë³´ì™„ ìƒ‰ìƒ
- `direction`: ë°©í–¥
- `season`: ê³„ì ˆ
- `numbers`: í–‰ìš´ ìˆ«ì
- `foods`: ì¶”ì²œ ìŒì‹
- `activities`: ì¶”ì²œ í™œë™
- `careers`: ì§ì—…/í™œë™ ë¶„ì•¼
- `items`: ë¬¼ê±´/ì†Œí’ˆ
- `spaces`: ê³µê°„/í™˜ê²½
- `habits`: ì¼ìƒ ìŠµê´€
- `mindset`: ë§ˆìŒê°€ì§
- `warning`: ê³¼ì‰ ì‹œ ì£¼ì˜

#### ê¸°ë‘¥ë³„ ì˜ì—­ ì„¤ëª… (`PILLAR_MEANINGS`)
| ê¸°ë‘¥ | ì‹œê°„ëŒ€ | ì˜ì—­ | ê´€ê³„ |
|------|--------|------|------|
| ë…„ì£¼ | ì¶œìƒ~15ì„¸ | ì‚¬íšŒ/í™˜ê²½ | ì¡°ìƒ/ì¡°ë¶€ëª¨ |
| ì›”ì£¼ | 15~30ì„¸ | ì„±ì¥/ì§ì—… | ë¶€ëª¨/ì§ì¥ |
| ì¼ì£¼ | 30~45ì„¸ | ë³¸ì§ˆ/ê²°í˜¼ | ë³¸ì¸/ë°°ìš°ì |
| ì‹œì£¼ | 45ì„¸ ì´í›„ | ë§ë…„/ê²°ì‹¤ | ìë…€/ì œì |

#### ì²œê°„ í•©/ì¶© ì •ë³´
**ì²œê°„ í•© (`CHEONGAN_HAP_INFO`)**:
- ê°‘+ê¸° = í†  (ì¤‘ì •ì§€í•©)
- ì„+ê²½ = ê¸ˆ (ì¸ì˜ì§€í•©)
- ë³‘+ì‹  = ìˆ˜ (ìœ„ì—„ì§€í•©)
- ì •+ì„ = ëª© (ì¸ìˆ˜ì§€í•©)
- ë¬´+ê³„ = í™” (ë¬´ì •ì§€í•©)

**ì²œê°„ ì¶© (`CHEONGAN_CHUNG_INFO`)**:
- ê°‘â†”ê²½: ê¸ˆê·¹ëª© (ê¶Œë ¥ ì¶©ëŒ)
- ì„â†”ì‹ : ê¸ˆê·¹ëª© (ì„¬ì„¸í•œ ê°ˆë“±)
- ë³‘â†”ì„: ìˆ˜ê·¹í™” (ì—´ì •ê³¼ ëƒ‰ì •)
- ì •â†”ê³„: ìˆ˜ê·¹í™” (ê°ì„± ì¶©ëŒ)

#### ìŠ¤í† ë¦¬í…”ë§ ìƒì„± í•¨ìˆ˜
```typescript
// ê°œì¸ìš© ìŠ¤í† ë¦¬ ì¸íŠ¸ë¡œ
generateStoryIntro(ilgan: string, yongsin: string): string

// ê·¸ë£¹ìš©(ì»¤í”Œ/ê°€ì¡±) ìŠ¤í† ë¦¬ ì¸íŠ¸ë¡œ
generateGroupStoryIntro(memberCount: number, score: number, isFamily?: boolean): string
```

### 8. ì»¤í”Œ ê¶í•© ë¶„ì„ (`/result/couple`)

**íŒŒì¼**: `src/lib/saju-compatibility.ts`

#### ë¶„ì„ í•­ëª©

**1. ì¼ê°„ ê´€ê³„ ë¶„ì„**
- 10Ã—10 ì²œê°„ ì¡°í•© (100ê°€ì§€)
- ê° ì¡°í•©ë³„ ì ìˆ˜ (50~90ì )
- ì‹­ì‹  ìœ í˜•: ë¹„ê²¬, ê²ì¬, ì‹ì‹ , ìƒê´€, í¸ì¬, ì •ì¬, í¸ê´€, ì •ê´€, í¸ì¸, ì •ì¸
- **ê¸ì • ìš”ì†Œ**: ì„œë¡œ ë„ì›€ì´ ë˜ëŠ” ì 
- **ë¶€ì • ìš”ì†Œ**: ê°ˆë“± ê°€ëŠ¥ì„± (ì •í™•í•œ ë¶„ì„ì„ ìœ„í•´ ë¶€ì •ì  ìš”ì†Œë„ í‘œì‹œ)

```typescript
// ì˜ˆì‹œ: ê°‘-ê²½ ê´€ê³„ (í¸ê´€)
{
  score: 50,
  type: "í¸ê´€",
  description: "ê¸´ì¥ê³¼ í†µì œ ê´€ê³„",
  positive: ["ì„œë¡œ ìê·¹ì´ ë¨", "ì„±ì¥ ë™ë ¥"],
  negative: ["ìŠ¤íŠ¸ë ˆìŠ¤ ë§ìŒ", "í•œìª½ì´ ì–µëˆŒë¦¼", "ê°ˆë“± ì¦ìŒ"]
}
```

**2. ì§€ì§€ ê´€ê³„ ë¶„ì„**
| ê´€ê³„ | ì˜ë¯¸ | ì ìˆ˜ ì˜í–¥ |
|------|------|----------|
| ìœ¡í•© | ì¢‹ì€ ì¡°í™” | +5ì  |
| ì¶© | ì¶©ëŒ ê´€ê³„ | -8ì  |
| í˜• | ê°ˆë“± ê´€ê³„ | -5ì  |
| í•´ | í•´ë¡œìš´ ê´€ê³„ | -3ì  |

**3. ì˜¤í–‰ ë¶„ì„**
- ì„œë¡œ ë³´ì™„ë˜ëŠ” ì˜¤í–‰ (í•œìª½ ë¶€ì¡± â†” ë‹¤ë¥¸ ìª½ í’ë¶€)
- ìƒê·¹ ê´€ê³„ ì˜¤í–‰ (ëª©â†”í† , í™”â†”ê¸ˆ, í† â†”ìˆ˜, ê¸ˆâ†”ëª©, ìˆ˜â†”í™”)

#### ì ìˆ˜ ë° ë“±ê¸‰
```typescript
// ì ìˆ˜ ë²”ìœ„: 30~100ì 
if (score >= 85) return "ì²œìƒì—°ë¶„";
if (score >= 75) return "ì¢‹ì€ ì¸ì—°";
if (score >= 65) return "ë³´í†µ ì¸ì—°";
if (score >= 55) return "ë…¸ë ¥ í•„ìš”";
return "ì£¼ì˜ í•„ìš”";
```

#### UI êµ¬ì„±
1. **ë‘ ì‚¬ëŒ ì‚¬ì£¼ ìš”ì•½**: ë¯¸ë‹ˆ ì‚¬ì£¼ ì¹´ë“œ (ë…„ì›”ì¼ì‹œ + ì˜¤í–‰ ë¶„í¬)
2. **ì´ì  ë° ë“±ê¸‰**: ì ìˆ˜ + ë“±ê¸‰ ë°°ì§€
3. **ì¼ê°„ ê´€ê³„**: ì‹­ì‹  ìœ í˜• ë° ì„¤ëª…
4. **ì§€ì§€ ê´€ê³„**: ìœ¡í•©/ì¶©/í˜•/í•´ ë°°ì§€
5. **ê°•ì **: ê¸ì •ì  ìš”ì†Œ ëª©ë¡
6. **ì£¼ì˜ì **: ë¶€ì •ì  ìš”ì†Œ ëª©ë¡ (ì •í™•í•œ ë¶„ì„ ì œê³µ)
7. **ì¡°ì–¸**: ê´€ê³„ë³„ ë§ì¶¤ ì¡°ì–¸

---

### 9. UI ì»´í¬ë„ŒíŠ¸

**íŒŒì¼**: `src/components/saju/SajuResult.tsx`

#### í‘œì‹œ ì¹´ë“œ ëª©ë¡ (ê°œì¸ ê²°ê³¼)
1. **ìŠ¤í† ë¦¬í…”ë§ ì¸íŠ¸ë¡œ**: ê³„ì ˆê° ìˆëŠ” ë§ì¶¤ ì¸ì‚¬ë§
2. **ê¸°ë³¸ ì •ë³´**: ì–‘ë ¥/ìŒë ¥ ë‚ ì§œ, ì‹œê°„, ìš”ì¼, ë 
3. **ì¼ì£¼ ìƒì§• ì¹´ë“œ**: 60ê°‘ì ë³„ëª…, ë³¸ì§ˆ, ì„±ê²©, ì¸ìƒ ì£¼ì œ
4. **ê¸°ë‘¥ë³„ ì˜ì—­ ì„¤ëª…**: ë…„ì£¼/ì›”ì£¼/ì¼ì£¼/ì‹œì£¼ì˜ ì¸ìƒ ì˜ì—­
5. **ì‚¬ì£¼ ê¸°ë‘¥**: ë…„ì£¼/ì›”ì£¼/ì¼ì£¼/ì‹œì£¼ ì‹œê°í™” (ì²œê°„+ì§€ì§€+ì˜¤í–‰+ìŒì–‘+ì‹­ì‹ )
6. **ì²œê°„ ê´€ê³„ ë¶„ì„**: ì‚¬ì£¼ ë‚´ ì²œê°„ í•©/ì¶© í•´ì„
7. **ì˜¤í–‰ ë¶„ì„**: ë§‰ëŒ€ ì°¨íŠ¸ + ë¶„ì„ ê²°ê³¼ (ê°€ì¥ ë§ì€/ì ì€ ì˜¤í–‰, ë³´ì¶© ì¶”ì²œ)
8. **ì˜¤í–‰ ë³´ì™„ë²• ìƒì„¸**: ìŒì‹, í™œë™, ë¬¼ê±´, ê³µê°„, ìŠµê´€ ë“± ì‹¤ìƒí™œ ì¡°ì–¸
9. **ì¼ê°„ ì„±í–¥ ë¶„ì„**: í•µì‹¬ ìš”ì•½, ê°•ì /ì£¼ì˜ì , ìƒì„¸ ì„±í–¥ 6ê°€ì§€, ì¡°ì–¸
10. **ë³´ì¶© ì˜¤í–‰ ìƒí™œ ì¡°ì–¸**: ìƒ‰ìƒ, ë°©í–¥, ì§ì—…, ìŠµê´€, ê±´ê°•, ê³„ì ˆ, ìˆ«ì, ìŒì‹
11. **ì˜¤í–‰ ê· í˜• ë¶„ì„**: ê°•í•œ/ì•½í•œ/ì—†ëŠ” ì˜¤í–‰ í‘œì‹œ

#### ì»¤í”Œ ê²°ê³¼ ì¶”ê°€ ì¹´ë“œ
- **ìŠ¤í† ë¦¬í…”ë§ ì¸íŠ¸ë¡œ**: ê¶í•© ì ìˆ˜ ê¸°ë°˜ ì¸ì‚¬ë§
- **ì¼ì£¼ ìƒì§• ë¹„êµ**: ë‘ ì‚¬ëŒì˜ 60ê°‘ì ë³„ëª… ë¹„êµ
- **ê³µí†µ ì˜¤í–‰ ë³´ì™„ í™œë™**: í•¨ê»˜ í•  ìˆ˜ ìˆëŠ” í™œë™/ìŒì‹

#### ê°€ì¡± ê²°ê³¼ ì¶”ê°€ ì¹´ë“œ
- **ìŠ¤í† ë¦¬í…”ë§ ì¸íŠ¸ë¡œ**: ê°€ì¡± ì ìˆ˜ ê¸°ë°˜ ë”°ëœ»í•œ ì¸ì‚¬ë§
- **ê°€ì¡± ì¼ì£¼ ìƒì§•**: ëª¨ë“  êµ¬ì„±ì›ì˜ 60ê°‘ì ë³„ëª…
- **ê°€ì¡± ì˜¤í–‰ ë³´ì™„ í™œë™**: ê°€ì¡±ì´ í•¨ê»˜ í•  ìˆ˜ ìˆëŠ” í™œë™/ìŒì‹

---

## íŒŒì¼ êµ¬ì¡°

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â””â”€â”€ saju/
â”‚   â”‚       â”œâ”€â”€ route.ts              # ì‚¬ì£¼ ê³„ì‚° API
â”‚   â”‚       â””â”€â”€ compatibility/
â”‚   â”‚           â””â”€â”€ route.ts          # ê¶í•© ë¶„ì„ API
â”‚   â”œâ”€â”€ result/
â”‚   â”‚   â”œâ”€â”€ page.tsx                  # ê°œì¸ ê²°ê³¼ í˜ì´ì§€
â”‚   â”‚   â””â”€â”€ couple/
â”‚   â”‚       â””â”€â”€ page.tsx              # ì»¤í”Œ ê¶í•© ê²°ê³¼ í˜ì´ì§€
â”‚   â”œâ”€â”€ page.tsx                      # ë©”ì¸ ì…ë ¥ í¼
â”‚   â””â”€â”€ layout.tsx
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ saju/
â”‚   â”‚   â”œâ”€â”€ SajuForm.tsx              # ìƒë…„ì›”ì¼ì‹œ ì…ë ¥ í¼
â”‚   â”‚   â”œâ”€â”€ SajuResult.tsx            # ê°œì¸ ê²°ê³¼ í‘œì‹œ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â””â”€â”€ PersonForm.tsx            # ê°œì¸ ì •ë³´ ì…ë ¥ í¼
â”‚   â””â”€â”€ ui/                           # shadcn/ui ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ saju-calculator.ts            # ì‚¬ì£¼ ê³„ì‚° ë¡œì§
â”‚   â”œâ”€â”€ saju-traits.ts                # ì„±í–¥ ë¶„ì„ í…œí”Œë¦¿
â”‚   â”œâ”€â”€ saju-compatibility.ts         # ê¶í•© ë¶„ì„ ë¡œì§
â”‚   â”œâ”€â”€ saju-family.ts                # ê°€ì¡± ë¶„ì„ ë¡œì§
â”‚   â”œâ”€â”€ saju-analysis-data.ts         # ë¶„ì„ ê°•í™” ë°ì´í„° (60ê°‘ì, 12ìš´ì„±, ì˜¤í–‰ ë³´ì™„ë²•)
â”‚   â””â”€â”€ supabase.ts                   # Supabase í´ë¼ì´ì–¸íŠ¸
â””â”€â”€ types/
    â””â”€â”€ saju.ts                       # íƒ€ì… ì •ì˜
```

---

## API ëª…ì„¸

### POST /api/saju

ì‚¬ì£¼íŒ”ì ê³„ì‚°

**Request Body**:
```json
{
  "year": 1997,
  "month": 2,
  "day": 5,
  "hour": 12,
  "minute": 0,
  "isLunar": false,
  "isLeapMonth": false,
  "timeUnknown": false
}
```

**Response**:
```json
{
  "success": true,
  "data": {
    "yearPillar": { "cheongan": "ì •", "jiji": "ì¶•", ... },
    "monthPillar": { ... },
    "dayPillar": { "cheongan": "ë¬´", "jiji": "ì¸", "cheonganSipsin": "ë¹„ê²¬", "jijiSipsin": "í¸ê´€", ... },
    "timePillar": { ... },
    "ohengCount": { "ëª©": 2, "í™”": 2, "í† ": 3, "ê¸ˆ": 0, "ìˆ˜": 1 },
    "yongsin": "ê¸ˆ",
    "birthInfo": { ... },
    "meta": { "ddi": "ì†Œ", "ddiLunar": "ì¥", ... },
    "analysis": {
      "ilganTraits": { "type": "ë“ ë“ í•œ í˜„ì‹¤ì£¼ì˜ì", ... },
      "yongsinAdvice": { "colors": ["í°ìƒ‰", "ì€ìƒ‰"], ... },
      "ohengBalance": { "strong": ["í† "], "weak": ["ìˆ˜"], "missing": ["ê¸ˆ"], ... }
    }
  }
}
```

### POST /api/saju/compatibility

ì»¤í”Œ ê¶í•© ë¶„ì„

**Request Body**:
```json
{
  "person1": { /* SajuApiResult */ },
  "person2": { /* SajuApiResult */ }
}
```

**Response**:
```json
{
  "success": true,
  "data": {
    "totalScore": 75,
    "grade": "ì¢‹ì€ ì¸ì—°",
    "gradeDescription": "ì¢‹ì€ ê¶í•©ì…ë‹ˆë‹¤. ë…¸ë ¥í•˜ë©´ ë” ì¢‹ì•„ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
    "ilganAnalysis": {
      "person1Ilgan": "ê°‘",
      "person2Ilgan": "ê¸°",
      "score": 90,
      "type": "ì •ì¬",
      "description": "ì•ˆì •ì ì¸ ì¸ì—°",
      "positive": ["ì‹ ë¢° ê¸°ë°˜ ê´€ê³„", "ì˜¤ë˜ ì§€ì†ë¨"],
      "negative": ["ë³€í™” ì—†ì´ ì§€ë£¨í•´ì§ˆ ìˆ˜ ìˆìŒ"]
    },
    "jijiAnalysis": {
      "yukap": ["ì¸-í•´ ìœ¡í•©"],
      "chung": [],
      "hyung": [],
      "hae": []
    },
    "ohengAnalysis": {
      "person1Strong": ["ëª©", "í™”"],
      "person1Weak": ["ê¸ˆ"],
      "person2Strong": ["ê¸ˆ", "í† "],
      "person2Weak": ["ëª©"],
      "complementary": ["ê¸ˆ (ìƒëŒ€ë°©ì´ ë³´ì™„)", "ëª© (ë³¸ì¸ì´ ë³´ì™„)"],
      "conflict": []
    },
    "summary": {
      "strengths": ["ì‹ ë¢° ê¸°ë°˜ ê´€ê³„", "ì§€ì§€ ìœ¡í•©ìœ¼ë¡œ ìì—°ìŠ¤ëŸ¬ìš´ ì¡°í™”"],
      "weaknesses": ["ë³€í™” ì—†ì´ ì§€ë£¨í•´ì§ˆ ìˆ˜ ìˆìŒ"],
      "advice": "ì„œë¡œì—ê²Œ ì¢‹ì€ ì˜í–¥ì„ ì£¼ëŠ” ê´€ê³„ì…ë‹ˆë‹¤."
    }
  }
}
```

---

### GET /api/saju

ë§Œì„¸ë ¥ ë°ì´í„° ì¡°íšŒ

**Query Parameters**:
- `year`: ì—°ë„
- `month`: ì›”
- `day`: ì¼
- `lunar`: "true" | "false"

---

## ë°ì´í„°ë² ì´ìŠ¤

### calenda_data í…Œì´ë¸”

ë§Œì„¸ë ¥ ë°ì´í„° 73,442ê±´ (1900-2100ë…„)

**ì£¼ìš” ì»¬ëŸ¼**:
| ì»¬ëŸ¼ | ì„¤ëª… |
|------|------|
| cd_sy, cd_sm, cd_sd | ì–‘ë ¥ ë…„/ì›”/ì¼ |
| cd_ly, cd_lm, cd_ld | ìŒë ¥ ë…„/ì›”/ì¼ |
| cd_leap_month | ìœ¤ë‹¬ ì—¬ë¶€ (0/1) |
| cd_kyganjee | ë…„ì£¼ ê°„ì§€ (í•œê¸€) |
| cd_kmganjee | ì›”ì£¼ ê°„ì§€ (í•œê¸€) |
| cd_kdganjee | ì¼ì£¼ ê°„ì§€ (í•œê¸€) |
| cd_ddi | ë  (ì…ì¶˜ ê¸°ì¤€) |
| cd_kweek | ìš”ì¼ |
| cd_kterms | ì ˆê¸° |

---

## ë²„ê·¸ ìˆ˜ì • ì´ë ¥

### 2025-12-02

#### 1. ì¼ì£¼ ì‹­ì‹  ë¯¸í‘œì‹œ ìˆ˜ì •
- **ë¬¸ì œ**: ì¼ì£¼ì— ì‹­ì‹ (ì •ì¸, ìƒê´€, í¸ì¬ ë“±)ì´ í‘œì‹œë˜ì§€ ì•ŠìŒ
- **ì›ì¸**: `createPillar(dayGanji)` í˜¸ì¶œ ì‹œ ì¼ê°„(`ilgan`) íŒŒë¼ë¯¸í„° ëˆ„ë½
- **í•´ê²°**: `createPillar(dayGanji, ilgan)`ìœ¼ë¡œ ìˆ˜ì •

#### 2. ì˜¤í–‰ ë™ì  í‘œì‹œ ìˆ˜ì •
- **ë¬¸ì œ**: ê°€ì¥ ë§ì€/ì ì€ ì˜¤í–‰ì´ ë™ì ì¼ ë•Œ ì²« ë²ˆì§¸ë§Œ í‘œì‹œ (ì˜ˆ: ëª©2, í™”2, í† 2 â†’ ëª©ë§Œ í‘œì‹œ)
- **í•´ê²°**: `filter()`ë¡œ ë™ì  ì˜¤í–‰ ëª¨ë‘ ì¶”ì¶œí•˜ì—¬ í‘œì‹œ
```typescript
const maxOhengList = sortedOheng.filter(([_, count]) => count === maxCount);
```

#### 3. ìš©ì‹  ë¡œì§ ê°œì„ 
- **ë¬¸ì œ**: ê¸°ì¡´ ìƒìƒ ê¸°ë°˜ ë¡œì§ì´ ë³µì¡í•˜ê³  ì§ê´€ì ì´ì§€ ì•ŠìŒ
- **í•´ê²°**: ë‹¨ìˆœí™”ëœ "ë³´ì¶© ì˜¤í–‰" ë¡œì§ìœ¼ë¡œ ë³€ê²½
  - ì—†ëŠ” ì˜¤í–‰(0ê°œ) ìš°ì„  ì¶”ì²œ
  - ì—†ìœ¼ë©´ ê°€ì¥ ì ì€ ì˜¤í–‰ ì¶”ì²œ
- **UI ë³€ê²½**: "ì¶”ì²œ ìš©ì‹ " â†’ "ë³´ì¶© ì¶”ì²œ", "ìš©ì‹  í•´ì„¤" â†’ "ë³´ì¶© ì˜¤í–‰ í•´ì„¤"

#### 4. ì‹œê°„ ëª¨ë¦„ ì²˜ë¦¬
- **ë¬¸ì œ**: "ëª¨ë¦„" ì„ íƒ ì‹œ 12ì‹œë¡œ ê³„ì‚°ë˜ê³  ì‹œì£¼ê°€ í‘œì‹œë¨
- **í•´ê²°**:
  - `timeUnknown` íŒŒë¼ë¯¸í„° ì „ì²´ íë¦„ êµ¬í˜„
  - ì‹œì£¼ ë¹ˆ ê°’ìœ¼ë¡œ ì²˜ë¦¬
  - ì˜¤í–‰ ê³„ì‚° ì‹œ ì‹œì£¼ ì œì™¸ (6ê¸€ì)
  - UIì—ì„œ ì‹œì£¼ ìˆ¨ê¹€ ë° ì‹œê°„ "ëª¨ë¦„" í‘œì‹œ

#### 5. ì»¤í”Œ ê¶í•© ê¸°ëŠ¥ êµ¬í˜„
- **ê¸°ì¡´**: ì»¤í”Œ íƒ­ì—ì„œ ì²« ë²ˆì§¸ ì‚¬ëŒ ê²°ê³¼ë§Œ í‘œì‹œ (TODO ìƒíƒœ)
- **êµ¬í˜„**:
  - `saju-compatibility.ts`: ê¶í•© ë¶„ì„ ë¡œì§ (ì¼ê°„/ì§€ì§€/ì˜¤í–‰ ê´€ê³„)
  - `/result/couple/page.tsx`: ì»¤í”Œ ê²°ê³¼ í˜ì´ì§€
  - `/api/saju/compatibility`: ê¶í•© API
  - `SajuForm.tsx`: ì»¤í”Œ ë¼ìš°íŒ… ì¶”ê°€
- **íŠ¹ì§•**: ê¸ì •/ë¶€ì • ìš”ì†Œ ê· í˜• ìˆê²Œ í‘œì‹œ (ì •í™•í•œ ë¶„ì„)

#### 6. ë¶„ì„ ê°•í™” ê¸°ëŠ¥ êµ¬í˜„ (ê°œì¸/ì»¤í”Œ/ê°€ì¡±)
- **ì‹ ê·œ ë°ì´í„° íŒŒì¼**: `saju-analysis-data.ts` (ì•½ 1100ì¤„)
  - 60ê°‘ì ì¼ì£¼ ìƒì§• (`ILJU_SYMBOLS`)
  - 12ìš´ì„± ì •ë³´ (`UNSEONG_INFO`)
  - ì˜¤í–‰ ë³´ì™„ë²• ìƒì„¸ (`OHENG_BOOSTERS`)
  - ê¸°ë‘¥ë³„ ì˜ì—­ ì„¤ëª… (`PILLAR_MEANINGS`)
  - ì²œê°„ í•©/ì¶© ì •ë³´ (`CHEONGAN_HAP_INFO`, `CHEONGAN_CHUNG_INFO`)
  - ìŠ¤í† ë¦¬í…”ë§ ìƒì„± í•¨ìˆ˜ (`generateStoryIntro`, `generateGroupStoryIntro`)

- **ê°œì¸ ê²°ê³¼ í˜ì´ì§€ ì—…ë°ì´íŠ¸** (`SajuResult.tsx`):
  - `StoryIntroCard`: ê³„ì ˆê° ìˆëŠ” ë§ì¶¤ ì¸ì‚¬ë§
  - `IljuSymbolCard`: ì¼ì£¼ ìƒì§•/ë³„ëª… í‘œì‹œ (Collapsible)
  - `PillarMeaningsCard`: ê¸°ë‘¥ë³„ ì˜ì—­ ì„¤ëª… (Collapsible)
  - `OhengBoosterDetailCard`: ì˜¤í–‰ ë³´ì™„ë²• ìƒì„¸ (ìŒì‹/í™œë™/ë¬¼ê±´/ê³µê°„/ìŠµê´€)
  - `CheonganRelationsCard`: ì²œê°„ í•©/ì¶© ë¶„ì„

- **ì»¤í”Œ ê²°ê³¼ í˜ì´ì§€ ì—…ë°ì´íŠ¸** (`/result/couple/page.tsx`):
  - `CoupleStoryIntroCard`: ê¶í•© ì ìˆ˜ ê¸°ë°˜ ì¸ì‚¬ë§
  - `CoupleIljuCard`: ë‘ ì‚¬ëŒì˜ ì¼ì£¼ ë³„ëª… ë¹„êµ
  - `CoupleOhengAdviceCard`: ê³µí†µ ì˜¤í–‰ ë³´ì™„ í™œë™/ìŒì‹

- **ê°€ì¡± ê²°ê³¼ í˜ì´ì§€ ì—…ë°ì´íŠ¸** (`/result/family/page.tsx`):
  - `FamilyStoryIntroCard`: ê°€ì¡± ì ìˆ˜ ê¸°ë°˜ ë”°ëœ»í•œ ì¸ì‚¬ë§
  - `FamilyIljuSymbolsCard`: ëª¨ë“  êµ¬ì„±ì›ì˜ ì¼ì£¼ ë³„ëª…
  - `FamilyOhengAdviceCard`: ê°€ì¡±ì´ í•¨ê»˜ í•  ìˆ˜ ìˆëŠ” í™œë™/ìŒì‹

---

## í–¥í›„ ê°œì„  ì‚¬í•­

### ìš°ì„ ìˆœìœ„ ë†’ìŒ
- [ ] ëŒ€ìš´(å¤§é‹) ê³„ì‚° ë° í‘œì‹œ
- [ ] ì„¸ìš´(æ­²é‹) ê³„ì‚° ë° í‘œì‹œ
- [ ] ê²°ê³¼ ê³µìœ  ê¸°ëŠ¥ (URL/ì´ë¯¸ì§€)

### ìš°ì„ ìˆœìœ„ ì¤‘ê°„
- [x] ê¶í•© ë¶„ì„ ê¸°ëŠ¥ âœ… (2025-12-02 ì™„ë£Œ)
- [x] ê°€ì¡± í†µí•© ë¶„ì„ ê¸°ëŠ¥ âœ… (2025-12-02 ì™„ë£Œ)
- [x] 60ê°‘ì ì¼ì£¼ ìƒì§•/ë³„ëª… âœ… (2025-12-02 ì™„ë£Œ)
- [x] 12ìš´ì„± ë¶„ì„ âœ… (2025-12-02 ì™„ë£Œ)
- [x] ì˜¤í–‰ ë³´ì™„ë²• ìƒì„¸í™” âœ… (2025-12-02 ì™„ë£Œ)
- [x] ê¸°ë‘¥ë³„ ì˜ì—­ ì„¤ëª… âœ… (2025-12-02 ì™„ë£Œ)
- [x] ì²œê°„ í•©/ì¶© ìƒì„¸ í•´ì„ âœ… (2025-12-02 ì™„ë£Œ)
- [x] ìŠ¤í† ë¦¬í…”ë§ ë„ì…ë¶€ âœ… (2025-12-02 ì™„ë£Œ)
- [ ] ì˜¤ëŠ˜ì˜ ìš´ì„¸ ê¸°ëŠ¥
- [ ] ì‚¬ìš©ì ê³„ì • ë° ì €ì¥ ê¸°ëŠ¥

### ìš°ì„ ìˆœìœ„ ë‚®ìŒ
- [ ] ë‹¤êµ­ì–´ ì§€ì›
- [ ] PDF ë‚´ë³´ë‚´ê¸°
- [ ] ìƒì„¸ ëª…ë¦¬í•™ í•´ì„¤ ì¶”ê°€

---

## ì°¸ê³  ìë£Œ

### ëª…ë¦¬í•™ ì¶œì²˜
- ì ì²œìˆ˜ (æ»´å¤©é«“)
- ìí‰ì§„ì „ (å­å¹³çœè©®)
- ê¶í†µë³´ê° (çª®é€šå¯¶é‘‘)

### ê¸°ìˆ  ë¬¸ì„œ
- [Next.js 16 Documentation](https://nextjs.org/docs)
- [Supabase Documentation](https://supabase.com/docs)
- [shadcn/ui](https://ui.shadcn.com/)
