/**
 * 사주 성향 분석 템플릿 데이터
 * - 일간별 성격 특성 (10천간)
 * - 오행별 생활 조언 (5행)
 *
 * 출처: 전통 명리학 (적천수, 자평진전, 궁통보감)
 */

// ============================================
// 일간(日干)별 성향 데이터
// ============================================

export interface IlganTraits {
  name: string;           // 한글명
  hanja: string;          // 한자
  oheng: string;          // 오행
  yinyang: "양" | "음";   // 음양
  symbol: string;         // 상징
  type: string;           // 성향 타입명
  keywords: string[];     // 핵심 키워드
  strengths: string[];    // 강점
  weaknesses: string[];   // 약점
  personality: string;    // 성격 설명
  decisionStyle: string;  // 의사결정 스타일
  relationStyle: string;  // 관계 스타일
  workStyle: string;      // 업무 스타일
  loveStyle: string;      // 연애 스타일
  stressPattern: string;  // 스트레스 패턴
  advice: string;         // 조언
}

export const ILGAN_TRAITS: Record<string, IlganTraits> = {
  "갑": {
    name: "갑",
    hanja: "甲",
    oheng: "목",
    yinyang: "양",
    symbol: "큰 나무, 소나무",
    type: "개척자형 리더",
    keywords: ["리더십", "정의감", "추진력", "곧음"],
    strengths: ["강한 추진력", "리더십", "정의로움", "솔직함", "책임감"],
    weaknesses: ["고집이 셈", "융통성 부족", "타협 어려움", "독선적 경향"],
    personality: "큰 나무처럼 곧고 우직한 성품입니다. 한번 정한 목표를 향해 흔들림 없이 나아가며, 주변 사람들에게 의지가 되는 존재입니다. 정의감이 강하고 불의를 보면 참지 못합니다.",
    decisionStyle: "빠른 결단력으로 즉각 행동에 옮기는 타입. 고민보다 실행을 중시합니다.",
    relationStyle: "의리 있고 솔직한 관계를 추구합니다. 가식을 싫어하며 신뢰를 중요시합니다.",
    workStyle: "목표 지향적이고 주도적입니다. 팀에서 자연스럽게 리더 역할을 맡게 됩니다.",
    loveStyle: "직진형 연애 스타일. 좋아하면 적극적으로 표현하고, 헌신적인 파트너가 됩니다.",
    stressPattern: "통제력을 잃거나 무시당할 때 스트레스를 받습니다. 자존심 상하는 상황에 예민합니다.",
    advice: "가끔은 물러설 줄도 아는 유연함이 더 큰 성공을 만듭니다."
  },
  "을": {
    name: "을",
    hanja: "乙",
    oheng: "목",
    yinyang: "음",
    symbol: "풀, 덩굴, 꽃",
    type: "유연한 협력가",
    keywords: ["적응력", "섬세함", "인내", "조화"],
    strengths: ["뛰어난 적응력", "섬세한 관찰력", "인내심", "협조성", "친화력"],
    weaknesses: ["우유부단함", "의존적 경향", "자기주장 부족", "결정 회피"],
    personality: "풀이 바람에 흔들려도 꺾이지 않듯이 유연하고 적응력이 뛰어납니다. 섬세하고 눈치가 빨라 주변 분위기를 잘 파악합니다. 부드럽지만 내면에 강인함이 있습니다.",
    decisionStyle: "충분히 상황을 살핀 후 결정합니다. 주변 의견을 많이 참고하는 편입니다.",
    relationStyle: "조화를 중시하며 갈등을 피하려 합니다. 상대방을 배려하는 따뜻한 사람입니다.",
    workStyle: "협업에 강하고 팀 분위기를 좋게 만듭니다. 꼼꼼하고 실수가 적습니다.",
    loveStyle: "상대에게 맞춰주는 헌신적인 스타일. 은근히 질투심이 있고 애정 확인을 원합니다.",
    stressPattern: "갈등 상황이나 강압적인 분위기에서 스트레스를 받습니다. 선택을 강요받을 때 힘들어합니다.",
    advice: "자신의 의견을 분명히 표현하는 연습이 필요합니다. 당신의 생각도 소중합니다."
  },
  "병": {
    name: "병",
    hanja: "丙",
    oheng: "화",
    yinyang: "양",
    symbol: "태양, 용광로",
    type: "열정적 표현가",
    keywords: ["열정", "밝음", "표현력", "낙천"],
    strengths: ["긍정적 에너지", "뛰어난 표현력", "사교성", "열정", "창의성"],
    weaknesses: ["조급함", "감정 기복", "끈기 부족", "과시 욕구"],
    personality: "태양처럼 밝고 따뜻한 에너지로 주변을 환하게 만듭니다. 열정적이고 표현력이 뛰어나 사람들의 주목을 받습니다. 낙천적이고 긍정적인 성격입니다.",
    decisionStyle: "직관과 감정을 따르는 편입니다. 빠른 결정을 좋아하지만 때로 충동적일 수 있습니다.",
    relationStyle: "사교적이고 친구가 많습니다. 분위기 메이커 역할을 자연스럽게 합니다.",
    workStyle: "창의적이고 아이디어가 풍부합니다. 새로운 프로젝트 시작에 강하지만 마무리가 약할 수 있습니다.",
    loveStyle: "로맨틱하고 적극적입니다. 사랑에 빠지면 온 세상에 알리고 싶어 합니다.",
    stressPattern: "관심받지 못하거나 무시당할 때 힘들어합니다. 반복적이고 지루한 일에 스트레스를 받습니다.",
    advice: "꾸준함의 가치를 알아가세요. 화려한 시작보다 묵묵한 완주가 더 빛납니다."
  },
  "정": {
    name: "정",
    hanja: "丁",
    oheng: "화",
    yinyang: "음",
    symbol: "촛불, 등불, 별빛",
    type: "섬세한 감성가",
    keywords: ["섬세함", "따뜻함", "예술성", "집중력"],
    strengths: ["섬세한 감성", "집중력", "예술적 재능", "배려심", "통찰력"],
    weaknesses: ["예민함", "걱정 많음", "소심함", "자기 의심"],
    personality: "촛불처럼 은은하고 따뜻한 빛을 가진 사람입니다. 겉으로는 조용해 보이지만 내면에 깊은 열정이 있습니다. 섬세하고 예술적 감각이 뛰어납니다.",
    decisionStyle: "신중하게 생각하고 결정합니다. 직감이 좋아 중요한 순간 올바른 선택을 합니다.",
    relationStyle: "소수의 깊은 관계를 선호합니다. 진심을 나눌 수 있는 사람에게 헌신합니다.",
    workStyle: "집중력이 뛰어나고 디테일에 강합니다. 창의적인 분야에서 두각을 나타냅니다.",
    loveStyle: "깊고 진지한 사랑을 합니다. 표현은 서툴지만 행동으로 사랑을 보여줍니다.",
    stressPattern: "비판받거나 실수했을 때 오래 마음에 담아둡니다. 과도한 자기 검열이 있습니다.",
    advice: "자신에게 좀 더 너그러워지세요. 완벽하지 않아도 충분히 가치 있는 사람입니다."
  },
  "무": {
    name: "무",
    hanja: "戊",
    oheng: "토",
    yinyang: "양",
    symbol: "산, 대지, 언덕",
    type: "든든한 현실주의자",
    keywords: ["안정", "신뢰", "포용력", "현실감"],
    strengths: ["안정감", "신뢰성", "포용력", "현실적 판단력", "책임감"],
    weaknesses: ["변화 거부", "고집", "느린 적응", "무뚝뚝함"],
    personality: "산처럼 듬직하고 흔들리지 않는 안정감이 있습니다. 현실적이고 실용적인 사고를 하며, 주변 사람들에게 신뢰받는 존재입니다. 말보다 행동으로 보여주는 타입입니다.",
    decisionStyle: "충분히 검토한 후 신중하게 결정합니다. 한번 결정하면 쉽게 바꾸지 않습니다.",
    relationStyle: "믿음직하고 의지할 수 있는 사람입니다. 표현은 서툴지만 행동으로 보여줍니다.",
    workStyle: "꾸준하고 성실합니다. 맡은 일은 끝까지 책임지며 장기 프로젝트에 강합니다.",
    loveStyle: "천천히 깊어지는 사랑을 합니다. 한번 마음을 주면 변함없이 지킵니다.",
    stressPattern: "급격한 변화나 불확실한 상황에서 스트레스를 받습니다. 계획이 틀어지면 불안해합니다.",
    advice: "때로는 변화를 받아들이는 것도 성장입니다. 새로운 시도를 두려워하지 마세요."
  },
  "기": {
    name: "기",
    hanja: "己",
    oheng: "토",
    yinyang: "음",
    symbol: "밭, 정원, 농토",
    type: "실용적 조율가",
    keywords: ["실용성", "꼼꼼함", "조율", "겸손"],
    strengths: ["실용적 사고", "꼼꼼함", "조율 능력", "겸손함", "배려심"],
    weaknesses: ["소극적", "자기 비하", "걱정 과다", "결단력 부족"],
    personality: "밭처럼 무엇이든 품어내고 키워내는 포용력이 있습니다. 실용적이고 꼼꼼하며 주변을 잘 돌봅니다. 겸손하고 욕심이 적어 주변에서 편안하게 느낍니다.",
    decisionStyle: "현실적인 이득과 손해를 꼼꼼히 따집니다. 실용성을 가장 중요시합니다.",
    relationStyle: "갈등을 중재하고 조화를 만드는 역할을 합니다. 누구와도 무난하게 지냅니다.",
    workStyle: "실무에 강하고 디테일을 놓치지 않습니다. 뒤에서 묵묵히 일하는 타입입니다.",
    loveStyle: "편안하고 안정적인 관계를 원합니다. 상대를 세심하게 챙기는 스타일입니다.",
    stressPattern: "인정받지 못하거나 무시당할 때 힘들어합니다. 남의 눈치를 많이 봅니다.",
    advice: "자신의 가치를 알아주세요. 당신이 하는 일은 충분히 소중하고 의미 있습니다."
  },
  "경": {
    name: "경",
    hanja: "庚",
    oheng: "금",
    yinyang: "양",
    symbol: "쇠, 바위, 칼",
    type: "원칙적 결단가",
    keywords: ["결단력", "정의", "원칙", "강직"],
    strengths: ["강한 결단력", "정의감", "원칙주의", "실행력", "용기"],
    weaknesses: ["냉정함", "융통성 부족", "독단적", "감정 표현 서툼"],
    personality: "쇠처럼 단단하고 칼처럼 날카로운 판단력을 가졌습니다. 옳고 그름이 명확하고 원칙을 중요시합니다. 강직하고 용감하며 불의와 타협하지 않습니다.",
    decisionStyle: "옳다고 판단하면 즉각 결단합니다. 논리적이고 명확한 기준이 있습니다.",
    relationStyle: "좁지만 깊은 관계를 맺습니다. 겉으로는 차가워 보이지만 속정이 깊습니다.",
    workStyle: "일 처리가 깔끔하고 빠릅니다. 비효율을 싫어하고 결과 중심적입니다.",
    loveStyle: "표현은 서툴지만 행동으로 사랑을 증명합니다. 한번 정하면 흔들리지 않습니다.",
    stressPattern: "불합리하거나 비효율적인 상황에서 답답해합니다. 우유부단한 사람에게 짜증을 느낍니다.",
    advice: "때로는 부드러움이 더 강한 힘이 됩니다. 공감과 경청의 가치를 기억하세요."
  },
  "신": {
    name: "신",
    hanja: "辛",
    oheng: "금",
    yinyang: "음",
    symbol: "보석, 귀금속, 바늘",
    type: "정교한 완벽주의자",
    keywords: ["정교함", "예민함", "완벽", "미적 감각"],
    strengths: ["뛰어난 미적 감각", "정교함", "분석력", "높은 기준", "진실 추구"],
    weaknesses: ["예민함", "비판적", "까다로움", "스트레스 취약"],
    personality: "보석처럼 빛나지만 세공의 고통을 아는 사람입니다. 높은 기준과 안목을 가졌으며 가짜를 못 참습니다. 예민하지만 그만큼 섬세하고 정교합니다.",
    decisionStyle: "완벽한 선택을 위해 오래 고민합니다. 기준이 높아 쉽게 만족하지 못합니다.",
    relationStyle: "진정성 있는 관계를 원합니다. 가식적인 사람을 금방 알아보고 거리를 둡니다.",
    workStyle: "퀄리티에 집착하며 디테일에 강합니다. 전문성을 중요시합니다.",
    loveStyle: "이상형 기준이 높습니다. 한번 사랑하면 깊이 빠지지만 상처도 오래 갑니다.",
    stressPattern: "완벽하지 못한 상황에서 스트레스를 받습니다. 자기 검열이 심합니다.",
    advice: "완벽하지 않아도 괜찮습니다. 과정을 즐기고 자신에게 관대해지세요."
  },
  "임": {
    name: "임",
    hanja: "壬",
    oheng: "수",
    yinyang: "양",
    symbol: "바다, 큰 강, 호수",
    type: "자유로운 지략가",
    keywords: ["지혜", "자유", "포용", "적응력"],
    strengths: ["넓은 포용력", "지혜", "적응력", "자유로운 사고", "통찰력"],
    weaknesses: ["산만함", "일관성 부족", "감정 기복", "책임 회피"],
    personality: "바다처럼 넓고 깊은 마음을 가졌습니다. 어떤 상황에도 유연하게 대처하며 다양한 사람들을 포용합니다. 자유를 사랑하고 틀에 박힌 것을 싫어합니다.",
    decisionStyle: "직관과 통찰에 따릅니다. 여러 가능성을 열어두고 유연하게 선택합니다.",
    relationStyle: "누구와도 잘 어울리지만 깊은 속내는 잘 보여주지 않습니다.",
    workStyle: "창의적이고 아이디어가 풍부합니다. 자유로운 환경에서 능력을 발휘합니다.",
    loveStyle: "자유로운 연애를 좋아합니다. 속박받는 느낌을 싫어해 적절한 거리를 유지합니다.",
    stressPattern: "속박받거나 자유가 제한될 때 힘들어합니다. 반복적인 일에 지루함을 느낍니다.",
    advice: "자유도 좋지만 때로는 한 곳에 뿌리내리는 용기도 필요합니다."
  },
  "계": {
    name: "계",
    hanja: "癸",
    oheng: "수",
    yinyang: "음",
    symbol: "비, 이슬, 안개",
    type: "직관적 통찰가",
    keywords: ["직관", "영감", "내성", "감수성"],
    strengths: ["뛰어난 직관", "영감", "관찰력", "감수성", "이해력"],
    weaknesses: ["내성적", "불안감", "자기 의심", "수동적"],
    personality: "비와 이슬처럼 조용히 스며드는 힘이 있습니다. 직관이 뛰어나고 사람의 마음을 잘 읽습니다. 겉으로는 차분하지만 내면에는 풍부한 감정의 세계가 있습니다.",
    decisionStyle: "직감을 중요시합니다. 논리보다 느낌을 따를 때 좋은 결과가 나옵니다.",
    relationStyle: "깊은 공감 능력으로 상대의 마음을 이해합니다. 조용히 곁에서 위로가 됩니다.",
    workStyle: "관찰력과 통찰이 필요한 일에 강합니다. 조용한 환경에서 집중력을 발휘합니다.",
    loveStyle: "말보다 느낌으로 통하는 사랑을 합니다. 상대의 감정 변화를 예민하게 감지합니다.",
    stressPattern: "과도한 자기 분석으로 지칩니다. 부정적 생각의 굴레에 빠지기 쉽습니다.",
    advice: "생각보다 행동이 답일 때가 있습니다. 머릿속에만 머물지 말고 밖으로 나와보세요."
  }
};

// ============================================
// 오행(五行)별 생활 조언 데이터
// ============================================

export interface OhengAdvice {
  name: string;
  hanja: string;
  nature: string;        // 오행의 본성
  colors: string[];      // 추천 색상
  directions: string[];  // 좋은 방향
  seasons: string;       // 관련 계절
  numbers: number[];     // 행운의 숫자
  careers: string[];     // 추천 직업/분야
  habits: string[];      // 좋은 습관
  avoid: string[];       // 피해야 할 것
  health: string;        // 건강 관리
  items: string[];       // 추천 아이템
  food: string[];        // 좋은 음식
  description: string;   // 설명
}

export const OHENG_ADVICE: Record<string, OhengAdvice> = {
  "목": {
    name: "목",
    hanja: "木",
    nature: "성장, 발전, 창의성, 시작",
    colors: ["초록", "청록", "연두", "민트"],
    directions: ["동쪽"],
    seasons: "봄",
    numbers: [3, 8],
    careers: ["교육", "의료", "출판", "스타트업", "컨설팅", "디자인", "창작"],
    habits: ["아침 산책", "독서", "식물 기르기", "새로운 것 배우기", "계획 세우기"],
    avoid: ["과도한 경쟁", "분노 억압", "급한 결정", "좌절에 오래 머물기"],
    health: "간/담 계열 관리가 중요합니다. 스트레칭, 눈 건강에 신경 쓰세요.",
    items: ["나무 소재 액세서리", "식물", "초록색 지갑", "책"],
    food: ["푸른 채소", "신맛 나는 음식", "나물"],
    description: "목(木) 에너지는 성장과 시작을 상징합니다. 새로운 도전과 창의적인 활동에서 기운을 얻습니다."
  },
  "화": {
    name: "화",
    hanja: "火",
    nature: "열정, 표현, 확산, 활력",
    colors: ["빨강", "주황", "분홍", "보라"],
    directions: ["남쪽"],
    seasons: "여름",
    numbers: [2, 7],
    careers: ["엔터테인먼트", "마케팅", "광고", "요식업", "미용", "패션", "방송"],
    habits: ["운동", "사교 활동", "취미 생활", "창작 활동", "명상"],
    avoid: ["과로", "수면 부족", "과도한 흥분", "화내기"],
    health: "심장/소장 계열 관리가 중요합니다. 혈압 관리, 충분한 휴식이 필요합니다.",
    items: ["빨간색 소품", "양초", "조명", "예술 작품"],
    food: ["쓴맛 음식", "붉은 과일", "토마토"],
    description: "화(火) 에너지는 열정과 표현력을 높입니다. 밝고 따뜻한 환경에서 활력을 얻습니다."
  },
  "토": {
    name: "토",
    hanja: "土",
    nature: "안정, 신뢰, 중재, 포용",
    colors: ["노랑", "베이지", "갈색", "황토색"],
    directions: ["중앙"],
    seasons: "환절기 (각 계절의 끝)",
    numbers: [5, 10],
    careers: ["부동산", "농업", "건설", "중개", "상담", "HR", "공무원"],
    habits: ["규칙적인 생활", "요리하기", "정리정돈", "명상", "걷기"],
    avoid: ["불규칙한 생활", "과식", "걱정 과다", "우유부단함"],
    health: "비장/위장 계열 관리가 중요합니다. 소화기 건강, 규칙적인 식사가 중요합니다.",
    items: ["도자기", "흙 화분", "크리스탈", "베이지 계열 옷"],
    food: ["단맛 음식", "곡류", "뿌리채소"],
    description: "토(土) 에너지는 안정과 신뢰를 가져옵니다. 중심을 잡고 균형을 유지하는 데 도움이 됩니다."
  },
  "금": {
    name: "금",
    hanja: "金",
    nature: "결단, 정의, 정리, 원칙",
    colors: ["흰색", "은색", "금색", "회색"],
    directions: ["서쪽"],
    seasons: "가을",
    numbers: [4, 9],
    careers: ["법률", "금융", "회계", "경영", "군/경", "IT", "제조업", "보석"],
    habits: ["정리정돈", "미니멀리즘", "계획 수립", "명확한 목표 설정", "운동"],
    avoid: ["우유부단함", "결정 미루기", "과도한 감상", "물건 쌓아두기"],
    health: "폐/대장 계열 관리가 중요합니다. 호흡기 건강, 규칙적 운동이 필요합니다.",
    items: ["금속 액세서리", "시계", "흰색 옷", "정리함"],
    food: ["매운맛 음식", "흰 채소", "도라지", "마늘"],
    description: "금(金) 에너지는 결단력과 명확함을 가져옵니다. 불필요한 것을 정리하고 핵심에 집중하세요."
  },
  "수": {
    name: "수",
    hanja: "水",
    nature: "지혜, 유연함, 소통, 저장",
    colors: ["검정", "남색", "파랑", "보라"],
    directions: ["북쪽"],
    seasons: "겨울",
    numbers: [1, 6],
    careers: ["연구", "학문", "IT", "예술", "심리상담", "물류", "무역", "해운"],
    habits: ["충분한 수면", "물 많이 마시기", "명상", "독서", "조용한 사색"],
    avoid: ["과로", "수면 부족", "과도한 걱정", "고립"],
    health: "신장/방광 계열 관리가 중요합니다. 수분 섭취, 충분한 휴식이 필요합니다.",
    items: ["수정", "물 관련 소품", "검정 지갑", "파란 아이템"],
    food: ["짠맛 음식(적당히)", "검은콩", "해조류", "물"],
    description: "수(水) 에너지는 지혜와 통찰력을 높입니다. 내면을 들여다보고 깊이 생각하는 시간이 필요합니다."
  }
};

// ============================================
// 헬퍼 함수들
// ============================================

/**
 * 일간으로 성향 데이터 가져오기
 */
export function getIlganTraits(ilgan: string): IlganTraits | null {
  return ILGAN_TRAITS[ilgan] || null;
}

/**
 * 오행으로 생활 조언 가져오기
 */
export function getOhengAdvice(oheng: string): OhengAdvice | null {
  return OHENG_ADVICE[oheng] || null;
}

/**
 * 오행 부족/과다 분석
 */
export function analyzeOhengBalance(ohengCount: { 목: number; 화: number; 토: number; 금: number; 수: number }): {
  strong: string[];
  weak: string[];
  missing: string[];
  dominant: string;
  advice: string;
} {
  const entries = Object.entries(ohengCount);
  const sorted = [...entries].sort((a, b) => b[1] - a[1]);

  const strong = sorted.filter(([_, count]) => count >= 3).map(([name]) => name);
  const weak = sorted.filter(([_, count]) => count === 1).map(([name]) => name);
  const missing = sorted.filter(([_, count]) => count === 0).map(([name]) => name);
  const dominant = sorted[0][0];

  let advice = "";
  if (missing.length > 0) {
    advice = `${missing.join(", ")} 오행이 부족합니다. 해당 에너지를 보충하면 균형이 좋아집니다.`;
  } else if (strong.length > 0 && weak.length > 0) {
    advice = `${strong.join(", ")} 오행이 강하고 ${weak.join(", ")} 오행이 약합니다. 약한 오행을 보완하세요.`;
  } else {
    advice = "오행이 비교적 균형 잡혀 있습니다.";
  }

  return { strong, weak, missing, dominant, advice };
}
